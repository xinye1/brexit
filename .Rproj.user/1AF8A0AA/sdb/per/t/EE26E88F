{
    "collab_server" : "",
    "contents" : "# setup and packages\npacman::p_load(\n  'devtools', 'purrr', 'dplyr', 'htmlwidgets',\n'stringr', 'rvest', 'xml2', 'htmltools', 'leaflet')\n# devtools::install_github('bhaskarvk/tilegramsR')\n# devtools::install_github('bhaskarvk/usgazetteer')\npacman::p_load(tilegramsR, usgazetteer)\n\nurl <- 'http://projects.fivethirtyeight.com/2016-election-forecast/?ex_cid=2016-senate-forecast'\n\ng <- xml2::read_html(url)\nstr(g)\n\n# These divs hold our data\nstate.winprobs <- g %>% rvest::html_nodes('.cards')\nstate.winprobs <- state.winprobs[2:52] # Select only state data\n\n# How many electoral votes per state\nelectoral.votes <- purrr::map_chr(\n  state.winprobs,\n  function(winprob) {\n    winprob %>%\n      rvest::html_node('p.top-powerbar') %>%\n      rvest::html_text()\n  }) %>%\n  stringr::str_extract('[0-9]+') %>% as.numeric()",
    "created" : 1488585482162.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "510640892",
    "id" : "EE26E88F",
    "lastKnownWriteTime" : 1488586358,
    "last_content_update" : 1488586358275,
    "path" : "C:/Users/Xinye/Dropbox/programming/brexit/code/tilegram.R",
    "project_path" : "code/tilegram.R",
    "properties" : {
        "marks" : "<:1,0\n>:3,0",
        "tempName" : "Untitled1"
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}